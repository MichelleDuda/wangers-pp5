{% extends "base.html" %}
{% load i18n crispy_forms_tags %}

{% block head_title %}{% trans "Leave a Review" %}{% endblock %}

{% block content %}
<div class="page-bg">
  <div class="form-block center mx-auto px-2 my-4">
    <div class="row form-header">
      <div class="col text-center mt-3">
        <h2 class="logo-font"><i class="fa-solid fa-pencil"></i> Write A Review <i class="fa-solid fa-pencil"></i></h2>
      </div>
    </div>

    <h3 class="text-center mt-4">
      {% if form.instance.pk %}
        {% trans "Edit Your Review" %}
      {% else %}
        {% trans "Leave a Review" %}
      {% endif %}
    </h3>

    <form method="post" action="" class="mx-auto text-start my-4" style="max-width: 600px;">
    {% csrf_token %}

    <div class="mb-3">
      {{ form.menu_item.label_tag }}
      {{ form.menu_item }}
      {{ form.menu_item.errors }}
    </div>

    <div class="mb-3">
      {{ form.title.label_tag }}
      {{ form.title }}
      {{ form.title.errors }}
    </div>

    <div class="mb-3">
      <label for="{{ form.rating.id_for_label }}">Rating: <span id="sliderValue">3</span></label>
      {{ form.rating }}
      {{ form.rating.errors }}
    </div>

    <div class="mb-3">
      {{ form.body.label_tag }}
      {{ form.body }}
      {{ form.body.errors }}
    </div>

    <div class="text-center">
      <button type="submit" class="registration_button mb-2">Submit Review</button>
    </div>
  </form>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const slider = document.querySelector('input[type="range"]');
    const valueDisplay = document.getElementById('sliderValue');
    if (slider && valueDisplay) {
      valueDisplay.textContent = slider.value;
      slider.addEventListener('input', function () {
        valueDisplay.textContent = this.value;
      });
    }
  });
</script>

{% endblock %}